<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GN-Math</title>
  <!-- V4 Global Stylesheet -->
  <link rel="stylesheet" href="../css/style.css" />

  <!-- GN-Math Specific Scripts & Analytics -->
  <script>
    window.addEventListener("beforeunload", function (event) {
      event.preventDefault();
      event.returnValue = "";
      return "Are you sure you want to leave? Any unsaved changes will be lost.";
    });
  </script>
  <script async src="https://stackpath.bootstrapcdn.com/adsense.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WX5VS54ZDW"></script>
  <meta name="google-adsense-account" content="ca-pub-5521219086088837" />
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-WX5VS54ZDW");
  </script>
  <script async src="https://fundingchoicesmessages.google.com/i/pub-5521219086088837?ers=1"></script>
  <script>
    (function () {
      function signalGooglefcPresent() {
        if (!window.frames["googlefcPresent"]) {
          if (document.body) {
            const iframe = document.createElement("iframe");
            iframe.style =
              "width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;";
            iframe.style.display = "none";
            iframe.name = "googlefcPresent";
            document.body.appendChild(iframe);
          } else {
            setTimeout(signalGooglefcPresent, 0);
          }
        }
      }
      signalGooglefcPresent();
    })();
  </script>
  <script src="https://cdn.jsdelivr.net/gh/gn-math/gn-math.github.io@main/gnmath.js"></script>

  <!-- Custom CSS Overrides for GN-Math Elements -->
  <style>
    /* Adjust the appearance of the card image inside the dashboard-card */
    .dashboard-card .card-image {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px 8px 0 0;
    }
    /* Controls padding and layout inside each card */
    .dashboard-card .card-body {
      padding: 1rem;
      display: flex;
      flex-direction: column;
      flex: 1;
    }
    /* Title styling inside each card */
    .dashboard-card .card-title {
      margin: 0.5rem 0;
      font-size: 1.2em;
      color: #333;
    }
    /* Play button styling inside each card */
    .dashboard-card .play-btn {
      margin-top: auto;
      background: linear-gradient(135deg, #6720bd 0%, #8a2be2 100%);
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9em;
      text-transform: uppercase;
      transition: all 0.3s ease;
    }
    .dashboard-card .play-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(103, 32, 189, 0.3);
    }
  </style>
</head>

<body class="dashboard-page">
  <!-- ==== V4 Header ==== -->
  <header class="main-header light-bg">
    <div class="container">
      <div class="logo">
        <a href="../index.html">
          <img src="../images/logo-dark.png" alt="4SP Logo" style="height: 40px; cursor: pointer;" />
        </a>
      </div>
      <div class="auth-buttons">
        <button class="btn btn-login" onclick="window.location.href='../index.html'">HOME</button>
        <button id="logoutBtn" class="btn btn-login">LOG OUT</button>
      </div>
    </div>
  </header>

  <div class="dashboard-container">
    <!-- ==== V4 Sidebar ==== -->
    <aside class="sidebar slide-in" id="sidebar">
      <button id="toggleSidebar">‚ò∞</button>

      <div class="user-info">
        <div class="marquee-container">
          <span id="userName" class="marquee-content username">Loading‚Ä¶</span>
        </div>
        <div class="marquee-container">
          <span id="userEmail" class="marquee-content email">Loading‚Ä¶</span>
        </div>
      </div>

      <nav>
        <ul>
          <li>
            <a href="dashboard.html">
              <span class="icon">üè†</span><span class="label">Dashboard</span>
            </a>
          </li>
          <li>
            <a href="proxies.html">
              <span class="icon">üõ°Ô∏è</span><span class="label">Proxies</span>
            </a>
          </li>
          <li>
            <a href="soundboard.html">
              <span class="icon">üéµ</span><span class="label">Soundboard</span>
            </a>
          </li>
          <li>
            <a href="games.html" class="active">
              <span class="icon">üéÆ</span><span class="label">Games</span>
            </a>
          </li>
          <li>
            <a href="others.html">
              <span class="icon">‚ú®</span><span class="label">Others</span>
            </a>
          </li>
          <li>
            <a href="settings.html">
              <span class="icon">‚öôÔ∏è</span><span class="label">Settings</span>
            </a>
          </li>
          <li>
            <a href="#" id="signOutLink">
              <span class="icon">üîí</span><span class="label">LOG OUT</span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- ==== Main Content Area ==== -->
    <main class="main-content fade-in">
      <!-- Section Header -->
      <div class="dashboard-header">
        <h2 class="dashboard-title">GN-Math Games</h2>
      </div>

      <!-- ==== Game Cards Grid ==== -->
      <div class="dashboard-grid" id="gameGrid">
        <!-- Static Example Card: Crazy Cattle 3D -->
        <div class="dashboard-card" data-id="crazycattle3d" data-page="zones/crazycattle3d/index.html">
          <img
            src="../images/crazycattle3d.jpg"
            alt="Crazy Cattle 3D"
            class="card-image"
          />
          <div class="card-body">
            <h4 class="card-title">Crazy Cattle 3D</h4>
            <p class="card-description" style="flex: 1; color: #666; font-size: 0.9em;">
              Navigate your bovine in a 3D obstacle course‚Äîno downloads required.
            </p>
            <button class="play-btn" onclick="window.location.href='zones/crazycattle3d/index.html'">
              Play
            </button>
          </div>
        </div>

        <!-- Static Example Card: DriveMad -->
        <div class="dashboard-card" data-id="drivemad" data-page="zones/drivemad/index.html">
          <img
            src="../images/drivemad.jpg"
            alt="DriveMad"
            class="card-image"
          />
          <div class="card-body">
            <h4 class="card-title">DriveMad</h4>
            <p class="card-description" style="flex: 1; color: #666; font-size: 0.9em;">
              Take control of the wheel in this high-speed driving challenge.
            </p>
            <button class="play-btn" onclick="window.location.href='zones/drivemad/index.html'">
              Play
            </button>
          </div>
        </div>

        <!-- ===== Add additional game cards below following the same structure ===== -->
        <!-- Example:
        <div class="dashboard-card" data-id="anothergame" data-page="zones/anothergame/index.html">
          <img src="../images/anothergame.jpg" alt="Another Game" class="card-image" />
          <div class="card-body">
            <h4 class="card-title">Another Game</h4>
            <p class="card-description" style="flex: 1; color: #666; font-size: 0.9em;">
              Brief description of Another Game goes here, explaining the objective or fun factor.
            </p>
            <button class="play-btn" onclick="window.location.href='zones/anothergame/index.html'">
              Play
            </button>
          </div>
        </div>
        -->

      </div>
      <!-- ==== End Game Cards Grid ==== -->

      <!-- Fallback message if JavaScript is disabled -->
      <noscript>
        <p style="text-align: center; color: #ff4d4f; margin-top: 2rem;">
          JavaScript is required to load the game list. Please enable JavaScript in your browser settings.
        </p>
      </noscript>
    </main>
  </div>

  <!-- ==== V4 Footer ==== -->
  <footer style="padding: 1rem 0; text-align: center; color: #666;">
    <div class="footer-links">
      <a href="#" onclick="showContact(); return false;" style="margin: 0 1rem; color: var(--primary-color); text-decoration: none;">
        Contact
      </a>
      <a href="#" onclick="loadPrivacy(); return false;" style="margin: 0 1rem; color: var(--primary-color); text-decoration: none;">
        Privacy Policy
      </a>
      <a href="javascript:saveData()" style="margin: 0 1rem; color: var(--primary-color); text-decoration: none;">
        Export Data
      </a>
      <label for="importData" style="margin: 0 1rem; color: var(--primary-color); cursor: pointer; text-decoration: underline;">
        Import Data
      </label>
      <input type="file" id="importData" style="display: none;" onchange="loadData(event)" />
    </div>
  </footer>

  <!-- ==== GN-Math & Firebase Scripts ==== -->
  <script src="script.js"></script>
  <script>
    // Hook up logout just like dashboard.html
    const handleLogout = () => {
      if (window.firebase && firebase.auth) {
        firebase
          .auth()
          .signOut()
          .then(() => (location.href = "../login.html"))
          .catch((error) => console.error("Logout error:", error));
      } else {
        location.href = "../index.html";
      }
    };
    document.getElementById("logoutBtn").onclick = handleLogout;
    document.getElementById("signOutLink").onclick = handleLogout;

    // Sidebar toggle (same as dashboard)
    const toggleSidebarBtn = document.getElementById("toggleSidebar");
    const sidebar = document.getElementById("sidebar");
    toggleSidebarBtn.addEventListener("click", () => {
      sidebar.classList.toggle("collapsed");
      // Optionally update marquees if you add marquee content here
    });
  </script>
</body>

</html>
