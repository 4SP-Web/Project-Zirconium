<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>4SP - VERN SOCIAL (DEMO)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* --- Core Styles --- */
    body, html {
      height: 100%;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: #f0f2f5;
    }
    .dashboard-page {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .main-header {
      flex-shrink: 0;
      background: #fff;
      padding: 10px 20px;
      border-bottom: 1px solid #ddd;
    }
    .main-header .logo img {
        height: 40px;
    }
    .dashboard-container {
      display: flex;
      flex: 1;
      overflow: hidden; /* Prevent container itself from scrolling */
    }

    /* --- Sidebar --- */
    .sidebar {
      width: 250px;
      background: #1c1e21;
      color: #fff;
      padding: 20px 10px;
      display: flex;
      flex-direction: column;
      border-right: 1px solid #444;
      transition: width 0.3s ease;
      flex-shrink: 0;
    }
    .sidebar.collapsed { width: 80px; }
    #toggleSidebar { display: none; /* Hiding for demo simplicity */ }
    .sidebar nav ul { list-style: none; padding: 0; margin: 20px 0 0; }
    .sidebar nav li { margin-bottom: 8px; }
    .sidebar nav a {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        color: #e4e6eb;
        text-decoration: none;
        border-radius: 8px;
        transition: background-color 0.3s ease;
    }
    .sidebar nav a.active, .sidebar nav a:hover { background-color: #3a3b3c; }
    .sidebar nav a .icon { font-size: 1.2em; width: 24px; text-align: center; }
    .sidebar nav a .label { margin-left: 15px; white-space: nowrap; }
    .sidebar.collapsed nav a .label { display: none; }
    .user-info {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #3a3b3c;
    }
    .user-info .username { font-size: 1.1em; font-weight: bold; }
    .user-info .email { font-size: 0.9em; color: #b0b3b8; }

    /* --- VERN SOCIAL Main Content --- */
    .social-container {
        flex: 1;
        display: flex;
        overflow: hidden;
    }
    .chat-sidebar {
        width: 320px;
        flex-shrink: 0;
        background-color: #fff;
        border-right: 1px solid #ddd;
        display: flex;
        flex-direction: column;
    }
    .chat-sidebar-header {
        padding: 15px;
        border-bottom: 1px solid #ddd;
    }
    #userSearchInput {
        width: 100%;
        padding: 10px 15px;
        border-radius: 20px;
        border: 1px solid #ccc;
        box-sizing: border-box;
    }
    .chat-list-section {
        flex-grow: 1;
        overflow-y: auto;
    }
    .chat-list-section h3 {
        font-size: 1em;
        text-transform: uppercase;
        color: #65676b;
        padding: 15px 20px 5px;
        margin: 0;
    }
    .chat-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .chat-list-item {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        cursor: pointer;
        border-bottom: 1px solid #eee;
        transition: background-color 0.2s;
    }
    .chat-list-item:hover { background-color: #f2f2f2; }
    .chat-list-item.active { background-color: #e7f3ff; }
    .chat-list-item .username { font-weight: bold; color: #050505; }
    .create-group-btn {
        display: block; width: calc(100% - 40px); margin: 20px; padding: 12px;
        background: #1877f2; color: white; border: none; border-radius: 8px;
        cursor: pointer; text-align: center; font-weight: bold;
    }
    .create-group-btn:disabled { background: #a5a8ad; cursor: not-allowed; }

    /* --- Chat Area --- */
    .chat-area {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        background-color: #e5e5e5;
    }
    .chat-header {
        padding: 15px 20px; background-color: #fff; border-bottom: 1px solid #ddd;
        flex-shrink: 0; display: flex; justify-content: space-between; align-items: center;
    }
    #chatName { font-size: 1.4em; font-weight: bold; color: #050505; }
    .messages-container {
        flex-grow: 1;
        padding: 20px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
    }
    .message {
        display: flex;
        flex-direction: column;
        max-width: 65%;
        margin-bottom: 15px;
        align-self: flex-start;
        align-items: flex-start;
    }
    .message.current-user {
        align-self: flex-end;
        align-items: flex-end;
    }
    .message-content {
        padding: 12px 18px; border-radius: 20px; background-color: #ffffff;
        color: #050505; line-height: 1.4; word-wrap: break-word; text-align: left;
        box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    .message.current-user .message-content {
        background: #0084ff; color: white;
    }
    .message-info { font-size: 0.8em; color: #65676b; margin-top: 5px; padding: 0 10px; }

    .chat-input-area {
        padding: 15px; border-top: 1px solid #ddd; flex-shrink: 0;
        display: flex; gap: 10px; background-color: #f7f7f7;
    }
    #messageInput { flex-grow: 1; padding: 12px 18px; border: 1px solid #ccc; border-radius: 20px; }
    #messageInput:disabled { background-color: #e9e9e9; }
    #sendMessageBtn {
        padding: 12px 25px; background: #0084ff; color: white; border: none;
        border-radius: 20px; cursor: pointer; font-size: 1.2em;
    }
    #sendMessageBtn:disabled { background: #a5a8ad; cursor: not-allowed; }
  </style>
</head>

<body class="dashboard-page">
  <header class="main-header">
    <div class="logo">
      <a href="#"><img src="https://placehold.co/150x40/ffffff/000000?text=LOGO" alt="4SP Logo"></a>
    </div>
  </header>

  <div class="dashboard-container">
    <aside class="sidebar" id="sidebar">
      <div class="user-info">
        <div class="username">Demo User</div>
        <div class="email">demo@example.com</div>
      </div>
      <nav>
        <ul>
          <li><a href="#"><span class="icon">üè†</span><span class="label">Dashboard</span></a></li>
          <li><a href="#"><span class="icon">üõ°Ô∏è</span><span class="label">Proxies</span></a></li>
          <li><a href="#"><span class="icon">üéµ</span><span class="label">Soundboard</span></a></li>
          <li><a href="#"><span class="icon">üéÆ</span><span class="label">Games</span></a></li>
          <li><a href="#" class="active"><span class="icon">‚ú®</span><span class="label">Others</span></a></li>
          <li><a href="#"><span class="icon">‚öôÔ∏è</span><span class="label">Settings</span></a></li>
          <li><a href="#"><span class="icon">üîí</span><span class="label">LOG OUT</span></a></li>
        </ul>
      </nav>
    </aside>

    <main class="social-container">
      <aside class="chat-sidebar">
        <div class="chat-sidebar-header">
            <input type="text" id="userSearchInput" placeholder="Search disabled in demo" disabled>
        </div>
        <div class="chat-list-section">
            <div id="friendsSection"><h3>Friends (Demo)</h3><ul id="friendsList" class="chat-list"></ul></div>
            <div id="groupsSection"><h3>Groups (Demo)</h3><ul id="groupsList" class="chat-list"></ul></div>
        </div>
        <button id="createGroupBtn" class="create-group-btn" disabled>Create Group Chat</button>
      </aside>

      <section class="chat-area" id="chatArea">
        <div id="chatActiveScreen" style="display: flex; flex-direction: column; flex-grow: 1;">
            <div class="chat-header">
                <h2 id="chatName">Loading...</h2>
            </div>
            <div class="messages-container" id="messagesContainer">
                 <p style="text-align:center; color:#aaa; margin: auto;">Starting chat simulation...</p>
            </div>
            <div class="chat-input-area">
                <input type="text" id="messageInput" placeholder="Automated demo chat" disabled>
                <button id="sendMessageBtn" disabled><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
      </section>
    </main>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM Elements ---
        const groupsList = document.getElementById('groupsList');
        const chatNameEl = document.getElementById('chatName');
        const messagesContainer = document.getElementById('messagesContainer');

        // --- Demo Configuration ---
        const BOT_COUNT = 19;
        const PHRASES = [
            "Hey, what's everyone up to?",
            "Has anyone seen the latest news? It's wild.",
            "I'm working on a cool project right now.",
            "LOL, that's hilarious!",
            "I'm not sure I agree with that.",
            "Can someone explain that again?",
            "Thinking about getting pizza later.",
            "This is a great discussion.",
            "Let's circle back to this tomorrow.",
            "I need a vacation. üå¥"
        ];
        
        // --- Mock Data ---
        const mockBots = [];
        for (let i = 1; i <= BOT_COUNT; i++) {
            mockBots.push({
                id: `bot_${i}`,
                username: `Bot User ${i}`
            });
        }
        
        const currentUser = {
            uid: 'current_user_demo',
            username: 'You'
        };
        
        // --- Demo Functions ---
        
        /**
         * Renders a single message in the chat container.
         * @param {string} text The message content.
         * @param {object} author The user object of the message author.
         */
        function renderMessage(text, author) {
            const isCurrentUser = author.id === currentUser.uid;

            const messageEl = document.createElement('div');
            messageEl.className = 'message';
            if (isCurrentUser) {
                messageEl.classList.add('current-user');
            }
            
            // Format the current time
            const sentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageEl.innerHTML = `
                <div class="message-content">${text}</div>
                <div class="message-info">
                    <span class="username">${author.username}</span> - <span class="timestamp">${sentTime}</span>
                </div>
            `;
            messagesContainer.appendChild(messageEl);

            // Auto-scroll to the latest message
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        /**
         * Simulates a bot sending a message.
         */
        function simulateBotMessage() {
            // Select a random bot and a random phrase
            const randomBot = mockBots[Math.floor(Math.random() * mockBots.length)];
            const randomPhrase = PHRASES[Math.floor(Math.random() * PHRASES.length)];
            
            renderMessage(randomPhrase, randomBot);
        }

        /**
         * Initializes the demo UI.
         */
        function initializeDemo() {
            // Set the chat name
            chatNameEl.textContent = 'Test Group';
            
            // Render the group in the sidebar and mark it as active
            groupsList.innerHTML = `
                <li class="chat-list-item active" data-chat-id="test_group">
                    <span class="username">Test Group</span>
                </li>
            `;
            
            // Clear the initial message
            messagesContainer.innerHTML = '';

            // Start the simulation
            // Send the first message immediately, then start the interval
            renderMessage("Welcome to the group chat demo!", currentUser);
            setTimeout(simulateBotMessage, 1500); // First bot message after a short delay

            // Have bots talk every 2.5 to 5 seconds
            setInterval(simulateBotMessage, Math.random() * (5000 - 2500) + 2500);
        }

        // --- Start the Demo ---
        initializeDemo();
    });
  </script>
</body>
</html>
