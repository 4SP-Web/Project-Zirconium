<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4SP - FEATURES</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="../panic-key.js"></script>
    <script src="../url-changer.js"></script>
    <style>
        /* --- Base Styles from the-story.html --- */
        /* --- Dropdown Styles - Updated for JS Positioning --- */
        .logged-in-link, .logged-out-link { display: none; }
        .main-nav .dropdown { position: relative; }
        .main-nav .dropdown .dropbtn { cursor: default; }
        .main-nav .dropdown-content { display: block; opacity: 0; visibility: hidden; transform: translateY(10px); transition: opacity 0.25s ease-out, transform 0.25s ease-out, visibility 0.25s; position: fixed; z-index: 1000; background-color: #ffffff; min-width: 180px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); border-radius: 16px; overflow: hidden; }
        .main-nav .dropdown-content.show { opacity: 1; visibility: visible; transform: translateY(0); }
        .main-nav .dropdown-header { padding: 12px 16px; font-family: 'PrimaryFont', sans-serif; color: #333; cursor: default; }
        .main-nav .dropdown-divider { height: 1px; margin: 0 10px; border: none; background-color: #e0e0e0; }
        .main-nav .dropdown-content a { color: #333; padding: 12px 16px; text-decoration: none; display: block; text-align: left; background-color: transparent; transition: background-color 0.2s ease-in-out; }
        .main-nav .dropdown-content a:hover { background-color: #f1f1f1; }
        .fade-in-section { opacity: 0; transform: translateY(20px); transition: opacity 0.45s ease-out, transform 0.3s ease-out; }
        .fade-in-section.is-visible { opacity: 1; transform: translateY(0); }

        /* --- Styles for Features Content and Demo Cards (from notes.html) --- */
        :root {
            --v4-card-bg: #fff;
            --v4-text-primary: #333;
            --v4-text-secondary: #555;
            --v4-border-light: #ddd;
        }
        .feature-section h3 {
            font-size: 1.5em; /* Adjusted for consistency */
            margin-bottom: 12px;
        }
        .feature-section p, .feature-section ul {
            font-size: 1.1em;
            line-height: 1.7;
        }
        .feature-section kbd {
            background-color: #e2e2e2;
            border-radius: 4px;
            border: 1px solid #b4b4b4;
            padding: 3px 6px;
            font-family: monospace;
            font-size: 0.95em;
            color: #333;
        }
        
        /* Demo Card styling from notes.html */
        #demoNotesView { margin-top: 24px; }
        .note-card {
            font-family: 'PrimaryFont' sans-serif;
            background: var(--v4-card-bg);
            border-radius: 15px;
            margin-bottom: 20px;
            padding: 20px 25px;
            box-shadow: 0 6px 30px rgba(0,0,0,0.08);
            transition: all 0.3s ease-in-out;
            position: relative;
            cursor: pointer;
        }
        .note-card.swapping { opacity: 0; transform: scale(0.95); }
        .note-card.nudge-up { animation: nudge-up 0.3s ease-in-out; }
        .note-card.nudge-down { animation: nudge-down 0.3s ease-in-out; }
        @keyframes nudge-up { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
        @keyframes nudge-down { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(6px); } }
        
        .note-card-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 15px; }
        .note-info { flex-grow: 1; min-width: 0; }
        .note-title { font-size: 1.6em; font-weight: bold; color: var(--v4-text-primary); }
        .note-description { font-size: 1em; color: var(--v4-test-secondary); }
        
        /* Styles for colored cards */
        .note-card.colored .note-title { color: #fff; text-shadow: 0 1px 3px rgba(0,0,0,0.4); }
        .note-card.colored .note-description { color: #eee; text-shadow: 0 1px 3px rgba(0,0,0,0.4); }

        .reorder-btn-group {
            display: flex; flex-direction: column; height: 38px; width: 45px;
            border: 1px solid var(--v4-border-light); border-radius: 8px;
            overflow: hidden; opacity: 0; pointer-events: none;
            transition: opacity 0.2s ease-in-out;
        }
        .note-card:hover .reorder-btn-group { /* Fallback for non-touch */
             /* opacity: 1; pointer-events: auto; */
        }
        .reorder-btn-group.visible { opacity: 1; pointer-events: auto; }

        .half-btn {
            flex: 1; background: none; border: none; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.9em; color: var(--v4-text-secondary); transition: background-color 0.2s ease;
        }
        .half-btn.up { border-bottom: 1px solid var(--v4-border-light); }
        .half-btn:hover { background-color: #e9ecef; }
        
        /* Glassy buttons for colored cards */
        .reorder-btn-group.glassy {
            background-color: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .reorder-btn-group.glassy .half-btn { color: #fff; }
        .reorder-btn-group.glassy .half-btn.up { border-bottom: 1px solid rgba(255, 255, 255, 0.3); }
        .reorder-btn-group.glassy .half-btn:hover { background-color: rgba(255, 255, 255, 0.2); }

    </style>
</head>
<body>
    <section class="hero-section dark-bg">
        <div class="container">
            <h1>4SP - FEATURES</h1>
        </div>
    </section>

    <header class="main-header light-bg">
        <div class="container">
            <div class="logo">
                <img src="images/logo-dark.png" alt="4SP Logo">
            </div>
            <nav class="main-nav">
                <ul id="mainNavLinks">
                    <li class="dropdown logged-in-link" id="more-dropdown">
                        <a class="dropbtn">MORE</a>
                        <div class="dropdown-content">
                            <div class="dropdown-header">MORE</div>
                            <hr class="dropdown-divider">
                            <a href="index.html">HOME</a>
                            <a href="legal.html">LEGAL</a>
                        </div>
                    </li>
                    <li class="logged-in-link"><a href="logged-in/dashboard.html">DASHBOARD</a></li>
                    <li class="logged-in-link"><a href="logged-in/soundboard.html">SOUNDBOARD</a></li>
                    <li class="logged-out-link"><a href="index.html">HOME</a></li>
                    <li class="logged-out-link"><a href="legal.html">LEGAL</a></li>
                </ul>
            </nav>
            <div class="auth-buttons" id="authButtons">
                </div>
        </div>
    </header>

    <section class="news-bar light-bg">
        <div class="container">
            <p>Discover the tools and shortcuts at your fingertips</p>
        </div>
    </section>

    <section class="hp-infra-section light-bg">
        <div class="container">
            <h2>PLATFORM FEATURES</h2>
            <p>Learn how to get the most out of 4SP with powerful customizations and intuitive interface actions designed for efficiency.</p>
        </div>
    </section>

    <section class="info-sections light-bg">
        <div class="container">
            <div class="info-item left-image fade-in-section">
                <div class="info-content feature-section">
                    <h3>Interactive Card Management</h3>
                    <p>Your dashboard is fully customizable. To reorder widgets, <strong>right-click a card</strong> to reveal the reordering controls. Click the arrows to instantly change its position. <strong>Try it below!</strong></p>
                    <div id="demoNotesView">
                        <div class="note-card colored" data-note-id="demo-1" style="background-color: #8ac926;">
                            <div class="note-card-header">
                                <div class="note-info">
                                    <div class="note-title">Project Ideas</div>
                                    <div class="note-description">A list of potential projects.</div>
                                </div>
                                <div class="reorder-btn-group glassy">
                                    <button class="half-btn up" title="Move Up">▲</button>
                                    <button class="half-btn down" title="Move Down">▼</button>
                                </div>
                            </div>
                        </div>
                        <div class="note-card colored" data-note-id="demo-2" style="background-color: #1982c4;">
                            <div class="note-card-header">
                                <div class="note-info">
                                    <div class="note-title">Weekly Goals</div>
                                    <div class="note-description">Tasks to complete this week.</div>
                                </div>
                                <div class="reorder-btn-group glassy">
                                    <button class="half-btn up" title="Move Up">▲</button>
                                    <button class="half-btn down" title="Move Down">▼</button>
                                </div>
                            </div>
                        </div>
                        <div class="note-card colored" data-note-id="demo-3" style="background-color: #f8961e;">
                             <div class="note-card-header">
                                <div class="note-info">
                                    <div class="note-title">Shopping List</div>
                                    <div class="note-description">Groceries needed for the weekend.</div>
                                </div>
                                <div class="reorder-btn-group glassy">
                                    <button class="half-btn up" title="Move Up">▲</button>
                                    <button class="half-btn down" title="Move Down">▼</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="info-item right-image fade-in-section">
                <div class="info-content feature-section">
                    <h3>Advanced Panic Key</h3>
                    <p>The panic key is more powerful than ever. In <strong>Settings</strong>, you can fully customize its behavior:</p>
                    <ul>
                        <li>Set a <strong>custom activation key</strong>. Any single character that doesn't require Shift (like <kbd>q</kbd>, <kbd>1</kbd>, or <kbd>,</kbd>) can be your new panic key.</li>
                        <li>Define a <strong>custom redirect URL</strong>. Instantly escape to any website you want, such as Google or your school's portal.</li>
                    </ul>
                </div>
            </div>
            <div class="info-item left-image fade-in-section">
                <div class="info-content feature-section">
                    <h3>Quick-Apply Tab Disguising</h3>
                    <p>Changing your tab's appearance is now faster and easier. In <strong>Settings</strong>, you'll find a simple dropdown with a list of professional-looking presets.</p>
                    <p>Instantly disguise your tab as "Google Drive," "Schoology," "Canvas," and more with a single click.</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2025 4SP. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Standard Auth & Nav Logic ---
            const authButtonsDiv = document.getElementById('authButtons');
            const loggedInLinks = document.querySelectorAll('.logged-in-link');
            const loggedOutLinks = document.querySelectorAll('.logged-out-link');
            firebase.auth().onAuthStateChanged(user => {
                authButtonsDiv.innerHTML = '';
                if (user) {
                    authButtonsDiv.innerHTML = `<a href="#" class="btn btn-logout" onclick="firebase.auth().signOut()">LOGOUT</a>`;
                    loggedInLinks.forEach(link => link.style.display = 'inline-block');
                    loggedOutLinks.forEach(link => link.style.display = 'none');
                } else {
                    authButtonsDiv.innerHTML = `<a href="login.html" class="btn btn-login">LOGIN</a> <a href="signup.html" class="btn btn-signup">SIGN UP</a>`;
                    loggedInLinks.forEach(link => link.style.display = 'none');
                    loggedOutLinks.forEach(link => link.style.display = 'inline-block');
                }
            });
            
            // --- Dropdown Logic ---
            const dropdown = document.getElementById('more-dropdown');
            if(dropdown) {
                 const dropdownContent = dropdown.querySelector('.dropdown-content');
                 let hideTimeout;
                 const showMenu = () => { clearTimeout(hideTimeout); const rect = dropdown.getBoundingClientRect(); dropdownContent.style.left = `${rect.left}px`; dropdownContent.style.top = `${rect.bottom + 10}px`; dropdownContent.classList.add('show'); }
                 const hideMenu = () => { hideTimeout = setTimeout(() => { dropdownContent.classList.remove('show'); }, 200); };
                 dropdown.addEventListener('mouseenter', showMenu);
                 dropdownContent.addEventListener('mouseenter', () => clearTimeout(hideTimeout));
                 dropdown.addEventListener('mouseleave', hideMenu);
                 dropdownContent.addEventListener('mouseleave', hideMenu);
            }

            // --- Fade-in Animation Logic ---
            const sections = document.querySelectorAll('.fade-in-section');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) { entry.target.classList.add('is-visible'); }
                });
            }, { threshold: 0.1 });
            sections.forEach(section => { observer.observe(section); });

            // --- Interactive Demo Logic for Card Reordering ---
            const demoView = document.getElementById('demoNotesView');
            if (demoView) {
                demoView.addEventListener('contextmenu', e => {
                    const card = e.target.closest('.note-card');
                    if (!card) return;
                    e.preventDefault();
                    e.stopPropagation();
                    const reorderGroup = card.querySelector('.reorder-btn-group');
                    if (!reorderGroup) return;
                    const wasVisible = reorderGroup.classList.contains('visible');
                    document.querySelectorAll('.reorder-btn-group').forEach(el => el.classList.remove('visible'));
                    if (!wasVisible) { reorderGroup.classList.add('visible'); }
                });
                document.addEventListener('click', e => {
                    if (!e.target.closest('.note-card')) {
                        document.querySelectorAll('.reorder-btn-group').forEach(el => el.classList.remove('visible'));
                    }
                });
                demoView.addEventListener('click', e => {
                    const button = e.target.closest('.half-btn');
                    if (!button) return;
                    e.stopPropagation();
                    const card = button.closest('.note-card');
                    const direction = button.classList.contains('up') ? 'up' : 'down';
                    const sibling = direction === 'up' ? card.previousElementSibling : card.nextElementSibling;
                    if (sibling) {
                        card.classList.add('swapping');
                        sibling.classList.add('swapping');
                        setTimeout(() => {
                            if (direction === 'up') {
                                demoView.insertBefore(card, sibling);
                            } else {
                                demoView.insertBefore(sibling, card);
                            }
                            card.classList.remove('swapping');
                            sibling.classList.remove('swapping');
                        }, 200);
                    } else {
                        const nudgeClass = direction === 'up' ? 'nudge-up' : 'nudge-down';
                        card.classList.add(nudgeClass);
                        setTimeout(() => card.classList.remove(nudgeClass), 300);
                    }
                });
            }
        });
    </script>
</body>
</html>
