<!DOCTYPE html>
<html lang="en">
	<head>
		<title>StrongDog XP</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
		<link rel="stylesheet" href="css/style.css"> <!-- Assuming styles will be in style.css -->
		<script>
			async
			src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1609993827735056"
			crossorigin="anonymous"
		</script>
		<meta name="keywords" content="educational platform, learning resources, academic tools, educational games, student resources, school-friendly content, learning tools, interactive education, student access"/>
		<link rel="canonical" href="https://65s.org/" />
		<meta property="og:type" content="website" />
		<meta property="og:description" content="Unblocked Educational Games At School And Home for free"/>
		<meta property="og:image" content="strongdog.webp" />
		<script type="application/ld+json">
			{
				"@context": "https://schema.org",
				"@graph": [
					{
						"@type": "Organization",
						"name": "strongdogXP LLC",
						"url": "https://65s.org/",
						"logo": "https://65s.org/images/logo.png",
						"description": "strongdog XP is a gaming portal where users can access a wide variety of browser games and connect with the community through the Discord server.",
						"founder": { "@type": "Person", "name": "Josh P" }
					},
					{
						"@type": "WebSite",
						"url": "https://65s.org/",
						"name": "strongdog XP"
					},
					{
						"@type": "WebPage",
						"url": "https://65s.org/",
						"name": "Home",
						"description": "Browse a wide variety of browser games and join the strongdogXP community.",
						"inLanguage": "en-US"
					}
				]
			}
		</script>
		<link rel="icon" type="image/x-icon" href="img/favicon.ico" id="faviconLink" />
		<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
		<script>
			const firebaseConfig = {
				apiKey: "AIzaSyBh-VnGiP4qZD0r14gfn9dr77GwtslpTqU",
				authDomain: "strongdog-auth.firebaseapp.com",
				projectId: "strongdog-auth",
				storageBucket: "strongdog-auth.appspot.com",
				messagingSenderId: "936276282572",
				appId: "1:936276282572:web:a802b7f609381ff9428669",
				measurementId: "G-0YLTCV2MMS",
			};
			firebase.initializeApp(firebaseConfig);
			window.auth = firebase.auth();
			window.db = firebase.firestore();
			window.rtdb = firebase.database();
		</script>
		<style>
			:root {
			  --ff: 'PrimaryFont', sans-serif;
			  --bg-gradient: linear-gradient(135deg, #f0f2f5 0%, #e8eaf0 100%);
			  --purple-gradient: linear-gradient(135deg, #6720bd 0%, #8a2be2 100%);
			}
			body {
			  font-family: var(--ff);
			  margin: 0;
			  padding: 0;
			  background: var(--bg-gradient);
			  overflow-x: hidden;
			  color: #333;
			}
			.main-header {
				background: white;
				padding: 15px 30px;
				display: flex;
				align-items: center;
				justify-content: space-between;
				box-shadow: 0 4px 20px rgba(0,0,0,0.08);
				border-bottom: 1px solid rgba(103, 32, 189, 0.1);
				position: sticky;
				top: 0;
				z-index: 1000;
			}
			.logo {
			  font-weight: 700;
			  font-size: 2.2rem;
			  text-decoration: none;
			  color: #333;
			}
			.logo .xp {
			  background: var(--purple-gradient);
			  -webkit-background-clip: text;
			  -webkit-text-fill-color: transparent;
			}
			.menu-icon {
				width: 30px;
				height: 22px;
				position: relative;
				cursor: pointer;
				display: inline-block;
			}
			.menu-icon span {
				background-color: #333;
				display: block;
				position: absolute;
				height: 4px;
				width: 100%;
				border-radius: 2px;
				opacity: 1;
				left: 0;
				transform: rotate(0deg);
				transition: .25s ease-in-out;
			}
			.menu-icon span:nth-child(1) { top: 0px; }
			.menu-icon span:nth-child(2) { top: 9px; }
			.menu-icon span:nth-child(3) { top: 18px; }

			.slide-menu {
			  position: fixed;
			  top: 0;
			  left: 0;
			  height: 100vh;
			  width: 300px;
			  background: linear-gradient(180deg, #333 0%, #2a2a2a 100%);
			  color: white;
			  box-shadow: 5px 0 20px rgba(0, 0, 0, 0.7);
			  z-index: 1003;
			  transition: transform 0.5s ease;
			  transform: translateX(-100%);
			  padding: 20px;
			  overflow-y: auto;
			  box-sizing: border-box;
			}
			.slide-menu.open {
				transform: translateX(0);
			}
			.categories > a {
				display: flex;
				align-items: center;
				padding: 12px 15px;
				color: #fff;
				text-decoration: none;
				border-radius: 8px;
				transition: all 0.3s ease;
				font-family: var(--ff);
				text-transform: uppercase;
				margin-bottom: 10px;
			}
			.categories > a:hover, .categories > a.active {
				background: var(--purple-gradient);
				transform: translateX(5px);
			}
			.search-bar {
			  padding: 12px 20px;
			  font-size: 1em;
			  border-radius: 12px;
			  width: 350px;
			  border: 1px solid rgba(103, 32, 189, 0.2);
			  background: rgba(255, 255, 255, 0.4);
			  color: #333;
			  transition: all 0.3s ease;
			  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
			  outline: none;
			}
			.search-bar:focus {
				box-shadow: 0 4px 15px rgba(103, 32, 189, 0.15);
				border-color: rgba(103, 32, 189, 0.4);
			}
			.main-content {
				padding: 40px;
			}
			.games-grid {
			  display: grid;
			  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
			  gap: 25px;
			}
			.card {
			  background: white;
			  border-radius: 20px;
			  width: 100%;
			  aspect-ratio: 1;
			  box-shadow: 0 6px 30px rgba(0,0,0,0.08);
			  border: 1px solid rgba(103, 32, 189, 0.1);
			  transition: all 0.3s ease;
			  position: relative;
			  overflow: hidden;
			  display: flex;
			  flex-direction: column;
			  justify-content: flex-end;
			  text-decoration: none;
			}
			.card:hover {
			  transform: translateY(-8px) scale(1.02);
			  box-shadow: 0 15px 40px rgba(103, 32, 189, 0.15);
			  border-color: rgba(103, 32, 189, 0.3);
			}
			.card img {
			  position: absolute;
			  top: 0;
			  left: 0;
			  width: 100%;
			  height: 100%;
			  object-fit: cover;
			  transition: transform 0.4s ease;
			}
			.card:hover img {
				transform: scale(1.1);
			}
			.images-hidden .card img { display: none; }
			.images-hidden .card { background: #444; justify-content: center; align-items: center; }
			.images-hidden .card figcaption {
				position: relative;
				transform: translateY(0);
				opacity: 1;
				background: none;
				color: white;
			}
			.card figcaption {
			  position: relative;
			  z-index: 2;
			  width: 100%;
			  background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
			  color: #ffffff;
			  padding: 20px 10px 10px;
			  transition: all 0.4s ease;
			  text-align: center;
			  font-weight: 600;
			  box-sizing: border-box;
			}
			h2 {
				text-align: center;
				font-size: 2.2em;
				font-weight: bold;
				background: var(--purple-gradient);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
				margin: 60px 0 30px;
			}
			.modal-overlay {
				position: fixed; top: 0; left: 0; width: 100%; height: 100%;
				background: rgba(0,0,0,0.6); z-index: 2000; display: flex;
				justify-content: center; align-items: center; opacity: 0;
				visibility: hidden; transition: opacity 0.25s ease-out, visibility 0s linear 0.25s;
			}
			.modal-overlay.visible { opacity: 1; visibility: visible; transition-delay: 0s; }
			.modal-content {
				background-color: #fefefe; padding: 30px; border: 1px solid #bbb;
				width: 90%; max-width: 500px; border-radius: 18px;
				box-shadow: 0 8px 30px rgba(0,0,0,0.25); position: relative;
				color: #333; transform: scale(0.9);
				transition: transform 0.3s ease-out;
			}
			.modal-overlay.visible .modal-content { transform: scale(1); }
			.modal-buttons button {
				padding: 10px 20px; border: none; border-radius: 8px;
				cursor: pointer; font-family: var(--ff); font-weight: 600;
				transition: all 0.2s ease; margin: 0 10px;
			}
			.modal-buttons button#confirm-yes { background: var(--purple-gradient); color: white; }
			.modal-buttons button#confirm-no { background-color: #6c757d; color: white; }
			.modal-buttons button:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
			.settings-panel {
				padding-top: 20px; border-top: 1px solid #444; margin-top: 20px;
			}
			.toggle-option {
			  display: flex; justify-content: space-between; align-items: center;
			  padding: 10px; background: #222; border-radius: 10px;
			}
			.toggle-option label { font-size: 1.1rem; color: white; }
			.toggle-option input[type="checkbox"] {
			  appearance: none; width: 50px; height: 25px;
			  background: #555555; border-radius: 25px; position: relative;
			  cursor: pointer; outline: none; transition: background 0.3s ease;
			}
			.toggle-option input[type="checkbox"]:checked { background: var(--purple-gradient); }
			.toggle-option input[type="checkbox"]::before {
			  content: ""; position: absolute; width: 21px; height: 21px;
			  background: white; border-radius: 50%; top: 2px; left: 2px;
			  transition: transform 0.3s ease;
			}
			.toggle-option input[type="checkbox"]:checked::before { transform: translateX(25px); }
		</style>
	</head>
	<body>
		<header class="main-header">
			<div class="menu-icon" id="menuIcon">
				<span></span>
				<span></span>
				<span></span>
			</div>
			<a href="index.html" class="logo">strongdog<span class="xp">XP</span></a>
			<div class="search-container">
				<input
					type="text"
					class="search-bar"
					placeholder="Search for gamesâ€¦"
					id="searchInput"
					autocomplete="off"
				/>
			</div>
		</header>

		<main class="main-content">
			<h2 id="topGameHeader">Top Games</h2>
			<div class="games-grid" id="topGameList"></div>
			
			<h2 id="favoritesHeader" style="display: none;">Favorites</h2>
			<div class="games-grid" id="favoritesGameList" style="display: none;"></div>
			
			<h2>All Games</h2>
			<div class="games-grid" id="allList"></div>
		</main>

		<div class="slide-menu" id="slideMenu">
			<div class="categories">
				<a href="https://4simpleproblems.github.io/dashboard.html" class="option-link">Back to 4SP</a>
				<a href="favs.html" class="option-link">Favorites</a>
				<a href="#" id="settingsBtn" class="option-link">Settings</a>
				<a href="about.html" class="option-link">About | Bugs | Request Games</a>
				<a href="./save/index.html" class="option-link">Save manager</a>
				<a href="https://discord.gg/dyyebUaqRS" class="option-link">Discord Server</a>
			</div>
			<div class="settings-panel" id="settingsPanel" style="display: none;">
				<div class="toggle-option">
					<label for="imageToggle">Show Game Icons</label>
					<input type="checkbox" id="imageToggle">
				</div>
			</div>
		</div>

		<div class="modal-overlay" id="image-preference-modal">
			<div class="modal-content">
				<p>Do you want to see the images for the games? This can be changed later in settings.</p>
				<div class="modal-buttons">
					<button id="confirm-yes">Yes</button>
					<button id="confirm-no">No</button>
				</div>
			</div>
		</div>
		
		<script type="module">
			import games from "./cards-data.js";
			import { targetUrl } from "./appscript.js";

			const menuIcon = document.getElementById("menuIcon");
			const slideMenu = document.getElementById("slideMenu");
			const allListElement = document.getElementById("allList");
			const topGameList = document.getElementById("topGameList");
			const favoritesGameList = document.getElementById("favoritesGameList");
			const settingsBtn = document.getElementById("settingsBtn");
			const settingsPanel = document.getElementById("settingsPanel");
			const imageToggle = document.getElementById("imageToggle");
			const imagePrefModal = document.getElementById("image-preference-modal");
			const confirmYesBtn = document.getElementById("confirm-yes");
			const confirmNoBtn = document.getElementById("confirm-no");
			const searchInput = document.getElementById("searchInput");

			// --- Menu Logic ---
			menuIcon.addEventListener("click", (e) => {
				e.stopPropagation();
				slideMenu.classList.toggle("open");
			});
			document.addEventListener("click", (e) => {
				if (!slideMenu.contains(e.target) && e.target !== menuIcon && !e.target.closest('.menu-icon')) {
					slideMenu.classList.remove("open");
				}
			});

			// --- Settings Panel Logic ---
			settingsBtn.addEventListener("click", (e) => {
				e.preventDefault();
				settingsPanel.style.display = settingsPanel.style.display === 'none' ? 'block' : 'none';
			});

			// --- Image Preference Logic ---
			function applyImagePreference() {
				const preference = localStorage.getItem('imagePreference');
				if (preference === 'hide') {
					document.body.classList.add('images-hidden');
					imageToggle.checked = false;
				} else {
					document.body.classList.remove('images-hidden');
					imageToggle.checked = true;
				}
			}

			function checkFirstVisit() {
				if (!localStorage.getItem('hasVisited')) {
					imagePrefModal.classList.add('visible');
				}
			}

			confirmYesBtn.addEventListener('click', () => {
				localStorage.setItem('imagePreference', 'show');
				localStorage.setItem('hasVisited', 'true');
				imagePrefModal.classList.remove('visible');
				applyImagePreference();
			});

			confirmNoBtn.addEventListener('click', () => {
				localStorage.setItem('imagePreference', 'hide');
				localStorage.setItem('hasVisited', 'true');
				imagePrefModal.classList.remove('visible');
				applyImagePreference();
			});

			imageToggle.addEventListener('change', () => {
				localStorage.setItem('imagePreference', imageToggle.checked ? 'show' : 'hide');
				applyImagePreference();
			});

			// --- Game Loading and Display Logic ---
			function getCardHTML(game) {
				const { name, imgSrc, id } = game;
				const gameLink = `./play/?id=${id}`;
				return `
				<a href="${gameLink}" class="card" data-name="${name.toLowerCase()}">
					<img src="./img/${imgSrc}" alt="${name}" loading="lazy">
					<figcaption>${name}</figcaption>
				</a>
				`;
			}

			function renderGames(gameList, element) {
				element.innerHTML = gameList.map(g => getCardHTML(g)).join("");
			}
			
			async function fetchTopGames() {
				try {
					const response = await fetch(targetUrl);
					if (!response.ok) throw new Error("Network error");
					const data = await response.json();
					if (data && data.content) {
						const parsedData = JSON.parse(data.content);
						const topGameNames = parsedData.slice(1, 21).map(row => row[0]);
						const topGamesData = games.filter(g => topGameNames.includes(g.name));
						renderGames(topGamesData, topGameList);
					}
				} catch (e) {
					console.error(`Error fetching top games: ${e}`);
					topGameList.innerHTML = "<p>Could not load top games.</p>";
				}
			}

			function handleSearch() {
				const query = searchInput.value.toLowerCase();
				const allCards = document.querySelectorAll('#allList .card');
				allCards.forEach(card => {
					const name = card.dataset.name;
					if (name.includes(query)) {
						card.style.display = 'flex';
					} else {
						card.style.display = 'none';
					}
				});
			}

			searchInput.addEventListener('input', handleSearch);

			// --- Initial Load ---
			document.addEventListener('DOMContentLoaded', () => {
				renderGames(games, allListElement);
				fetchTopGames();
				applyImagePreference();
				checkFirstVisit();
			});
		</script>
	</body>
</html>
